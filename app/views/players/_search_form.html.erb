<section class="mb-12">
  <h1 class="text-4xl font-extrabold tracking-tight mb-1">選手を探す</h1>
  <p class="text-neutral-500 text-sm mb-8">名前を入力すると、プロフィール・タイトル・受賞歴をまとめて表示します。</p>

  <%= form_with url: players_path, id: "player-form", data: { turbo: false } do |form| %>
    <div class="flex gap-3">
      <%= form.text_field :player_name, value: params[:player_name], class: "flex-1 bg-neutral-900 border border-neutral-700 rounded-lg px-4 py-3 text-neutral-100 placeholder-neutral-600 focus:outline-none focus:ring-2 focus:ring-orange-500/60 focus:border-transparent transition", placeholder: "例：大谷翔平" %>
      <%= form.submit "検索", class: "bg-orange-600 hover:bg-orange-500 text-neutral-950 font-bold px-6 py-3 rounded-lg transition cursor-pointer" %>
    </div>
  <% end %>

  <div id="loading-overlay" style="display:none;" class="fixed inset-0 z-50 bg-neutral-950/85 flex items-center justify-center">
    <div class="flex flex-col items-center gap-8">
      <div class="relative w-16 h-16">
        <div class="absolute inset-0 rounded-full border-4 border-neutral-800"></div>
        <div class="absolute inset-0 rounded-full border-4 border-transparent border-t-orange-500 animate-spin"></div>
      </div>
      <div class="text-center">
        <p class="text-orange-400 font-bold text-lg tracking-wide animate-pulse">検索中</p>
        <p id="loading-message" class="text-neutral-500 text-sm mt-2 transition-opacity duration-300">データを取得しています</p>
      </div>
    </div>
  </div>

  <script>
    document.getElementById("player-form").addEventListener("submit", function() {
      var overlay = document.getElementById("loading-overlay");
      var messageEl = document.getElementById("loading-message");
      overlay.style.display = "flex";

      var messages = [
        "データを取得しています",
        "プロフィールを生成しています",
        "タイトル・受賞歴を確認しています",
        "もう少しお待ちください"
      ];
      var i = 0;
      setInterval(function() {
        i = (i + 1) % messages.length;
        messageEl.style.opacity = "0";
        setTimeout(function() {
          messageEl.textContent = messages[i];
          messageEl.style.opacity = "1";
        }, 300);
      }, 3000);
    });
  </script>
</section>
